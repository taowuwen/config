#!/usr/bin/env bash

_do_stop()
{
	killall -q polybar
	while pgrep -x polybar >/dev/null; do sleep 1; done
}

main()
{
	cmd=$1
	shift
	case $cmd in
		stop)
			_do_stop
		;;
		start|reload|restart)
			_do_stop

			[ "$1" = "all" ] && polybar top &
			polybar bottom &
		;;
		*)
	esac
}

main $*
